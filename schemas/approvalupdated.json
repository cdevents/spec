{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://cdevents.dev/1.0.0/schema/approval-updated-event",
  "x-cdevents-semantics": {
    "subject": "cdevents/_defs/approval"
  },
  "properties": {
    "context": {
      "properties": {
        "specversion": {
          "type": "string",
          "minLength": 1
        },
        "id": {
          "type": "string",
          "minLength": 1
        },
        "source": {
          "type": "string",
          "minLength": 1,
          "format": "uri-reference"
        },
        "type": {
          "type": "string",
          "enum": [
          "dev.cdevents.approval.updated.0.1.0"
          ],
          "default": "dev.cdevents.approval.updated.0.1.0"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "schemaUri": {
          "type": "string",
          "minLength": 1,
          "format": "uri"
        },
        "chainId": {
          "type": "string",
          "minLength": 1
        },
        "links": {
          "$ref": "links/embeddedlinksarray"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "specversion",
        "id",
        "source",
        "type",
        "timestamp"
      ]
    },
    "subject": {
      "properties": {
        "id": {
          "type": "string",
          "minLength": 1
        },
        "source": {
          "type": "string",
          "minLength": 1,
          "format": "uri-reference"
        },
        "content": {
          "properties": {
            "approvalDetailsUrl": {
              "type": "string",
              "minLength": 1,
              "$comment": "Reference URL to the approval request in the originating system. Consumers with appropriate access can retrieve the full approval context, history, and decisions from this URL. This provides the canonical location of the approval record."
            },
            "resourceTargetUrl": {
              "type": "string",
              "minLength": 1,
              "$comment": "Reference URL to the resource whose progression is gated by this approval. The approval does not describe the resource, but the URL allows consumers to retrieve resource information directly from the system that owns it."
            },
            "responder": {
              "type": "string",
              "format": "urn",
              "$comment": "URN identifying the entity that recorded this decision. May be a human identity, a service account, or an automated system."
            },
            "decision": {
              "type": "string",
              "$comment": "The decision recorded by the responder. Non-terminal status, and does not resolve the approval. The terminal decision and final status are captured in approval.closed."
            }
          },
          "additionalProperties": false,
          "type": "object",
          "required": [
            "approvalDetailsUrl",
            "resourceTargetUrl",
            "responder",
            "decision"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "id",
        "content"
      ]
    },
    "customData": {
      "oneOf": [
        {
          "type": "object"
        },
        {
          "type": "string",
          "contentEncoding": "base64"
        }
      ]
    },
    "customDataContentType": {
      "type": "string"
    }
  },
  "additionalProperties": false,
  "type": "object",
  "required": [
    "context",
    "subject"
  ]
}
